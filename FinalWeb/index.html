<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>01How's Weather</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 引入 基本JQuery及popper -->
	<script src="js/jquery-3.3.1.min.js" ></script>
	<script src="js/bootstrap/popper.min.js"></script>
	<!-- 引入 基本Bootstrap及Bootstrap Select -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script src="js/bootstrap/bootstrap.min.js"></script>
	<link rel="stylesheet" href="css/bootstrap-select.min.css">
	<script src="js/bootstrap/bootstrap-select.min.js"></script>
	<script src="js/bootstrap/defaults-zh_TW.min.js"></script>
	<!-- 引入 主要css樣式 -->
	<link href="css/main.css" rel="stylesheet" type="text/css">
	<!-- 引入 icon font CSS -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
</head>

<body data-target="#navbar-spy" data-spy="scroll"> 
	<!--頁首區塊---------->
		<!--導覽列-->
		<nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top" id="navbar-spy">
			<!--網站LOGO--><a class="navbar-brand" href="index.html">How's Weather</a>
			<!--縮小時漢堡鈕-->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon" style="width:20px;height:30px;"></span>
			</button>
			<!--導覽列內容-->
			<div class="collapse navbar-collapse justify-content-between" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item"><a class="nav-link" href="#home">首頁</a></li>
					<li class="nav-item"><a class="nav-link" href="#section2">今明預報</a></li>
					<li class="nav-item"><a class="nav-link" href="#section3">一週天氣</a></li>
					<li class="nav-item"><a class="nav-link" href="" data-toggle="modal" data-target="#Feedback">意見回饋</a></li>
					<li class="nav-item"><a class="nav-link" href="" data-toggle="modal" data-target="#AboutUS">關於</a></li>
				</ul>
			</div>
		</nav>

	<!--內容區塊---------->
	<content>
		<section id="home" class="container-fluid">
			<div class="row h-100 justify-content-center">
				<div class="col-10 col-lg-3 align-self-center">
					<div class="row justify-content-center">
						<div>
							<select id="selectCity" class="selectpicker show-menu-arrow" data-width="fit"></select><br/>
							<div class="weatherInfo"><span id="currentWx">陰時多雲短暫陣雨</span></div>
							<div id="currentTemp">17.40°C</div>
							<div class="weatherInfo">
								<i class="fas fa-umbrella"></i> <span id="currentPoP">50%</span>　
								<i class="fas fa-tint"></i> <span id="currentHUMD">75%</span>　
								<i class="fas fa-flask"></i> <span id="current24R">0mm</span>　
							</div>
						</div>
					</div>
				</div>
				<div class="col-10 col-lg-5 offset-lg-1 align-self-center">
					<div id="threeHours" class="tableRound table-responsive">
						<table class="text-nowrap">
							<tr id="threeHoursDayTitle" align="left"><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th></tr>
							<tr id="threeHoursHourTitle"><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th></tr>
							<tr id="threeHours01"><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td></tr>
							<tr id="threeHours02"><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td><td>Wx</td></tr>
						</table>
					</div>
				</div>
			</div>
		</section>

		<section id="section2" class="container-fluid">
			<div class="row h-100 justify-content-center">
				<div class="col-12 col-md-8 col-lg-6 align-self-center">
					<h1>今明預報</h1>
					<div id="twoDaysTimes" class="tableRound table-responsive">
						<table class="text-nowrap">
							<tr id="twoDaysTimesTitle"><th id="twoDaysCity"></th><th>氣溫</th><th>天氣現象</th><th>舒適度</th><th>降雨機率</th></tr>
							<tr id="twoDaysTimes01"></tr><tr id="twoDaysTimes02"></tr><tr id="twoDaysTimes03"></tr><tr id="twoDaysTimes04"><tr id="twoDaysTimes05"></tr>
						</table>
					</div>
				</div>
			</div>
		</section>

		<section id="section3" class="container-fluid">
			<div class="row h-100 justify-content-center">
				<div class="col-12 col-lg-8 align-self-center">
					<h1>一週天氣</h1>
					<div id="weekWeather" class="tableRound table-responsive">
						<table class="text-nowrap">
							<tr id="weekWeatherTitle"><th id="weekCity"></th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th></tr>
							<tr id="weekWeatherDay"></tr><tr id="weekWeatherNight"></tr>
						</table>
					</div>
				</div>
			</div>
		</section>
	</content>
	
	<!--頁尾區塊---------->
	<footer id="footer" class="container-fluid">
		<span>&copy; 2019 How's Weather</span>
	</footer>

	<!-- Modal 區塊---------->
	<!-- 回饋 -->
	<div class="modal" id="Feedback" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="modal-header">
						<h4 class="modal-title" id="exampleModalLongTitle">意見回饋</h4>
					</div>
					<form action="javascript:alert('感謝您的回饋！\n（不會真的送出）');">
						<div class="form-group">
							<label for="name">姓名：</label>
							<input type="text" class="form-control" id="name" required>
						</div>
						<div class="form-group">
							<label for="email">Email：</label>
							<input type="email" class="form-control" id="email" placeholder="abc123@weather.com" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z0-9.-]+" required>
						</div>
						<div class="form-group">
							<label for="textarea">其他建議：</label>
							<textarea class="form-control" id="textarea" required></textarea>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">關閉</button>
							<button type="submit" class="btn btn-primary">送出</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- 關於 -->
	<div class="modal" id="AboutUS" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="exampleModalLongTitle">關於我們</h4>
				</div>
				<div class="modal-body">
					<div class="text-justify">
					　　本網站僅作學術使用，本站之氣象資料與天氣狀況圖示皆屬<a href="https://www.cwb.gov.tw/" target="_blank">中央氣象局</a>所有。
					</div>
					<br/><hr>
					<div class="text-center text-muted">
						<h5>參與製作</h5>
						<span>林子佑　林子佑　林子佑　林子佑</span>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">關閉</button>
				</div>
			</div>
		</div>
	</div>



	<!--避免本頁面過冗長，以下三個JS檔獨立出來---------->
	<script src="js/weather/weatherObj.js"></script> <!--天氣物件變數-->
	<script src="js/weather/weatherGetJSON.js"></script> <!--天氣資料取得函式-->
	<script src="js/weather/changeWeather.js"></script> <!--天氣資料更改函式-->
	
	<!--本頁面JavaScript、JQuery---------->
	<script>
		//html 載入時執行
		$(function(){	
			$.ajaxSettings.async = false;
			getTwoDaysData(); //取得36小時天氣資料
			getCurrentData(); //取得局屬測站天氣資料及自動測站天氣資料
			getWeekData(); //取得一週天氣資料
			getThreeHoursData(); //取得逐三小時預報資料
			//--------------------載入後改變初始選取資料--------------------
			editWeatherData($('#selectCity').val("臺北市").selectpicker('refresh').val());
		});

		//建立下拉選單
		Object.keys(weatherObj).map(function(cityName){
			$('#selectCity').append('<option value="'+ cityName  + '">' + cityName + '</option>');
		})

		//下拉選單改變時
		$('#selectCity').on('changed.bs.select', function() {
			editWeatherData(this.value);
		});

		//更改今明預報及目前天氣function
		var editWeatherData = function (cityName){ 
			changeCurrent(cityName); //改目前天氣
			changeTwoDays(cityName); //改今明預報
			changeWeek(cityName); //改一週預報
			changeThreeHours(cityName); //改逐三小時
		};

		//超連結切換頁面時會用滑的，而不是直接跳過去
		$("a").on('click', function() {
			var hash = this.hash;// 存超連結hash值
			//使用jQuery的animate()加平滑滾動，數字800代表滾動到指定區域(hash)所需的毫秒數
			$('html, body').animate({ scrollTop: $(hash).offset().top }, 800);
		});
	</script>
</body>
</html>