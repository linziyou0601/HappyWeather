<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>How's Weather</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 引入 基本JQuery及popper -->
	<script src="js/jquery-3.3.1.min.js" ></script>
	<script src="js/bootstrap/popper.min.js"></script>
	<!-- 引入 基本Bootstrap及Bootstrap Select -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script src="js/bootstrap/bootstrap.min.js"></script>
	<link rel="stylesheet" href="css/bootstrap-select.min.css">
	<script src="js/bootstrap/bootstrap-select.min.js"></script>
	<script src="js/bootstrap/defaults-zh_TW.min.js"></script>
	<!-- 引入 主要css樣式 -->
	<link href="css/main.css" rel="stylesheet" type="text/css">
	<!-- 引入 icon font CSS -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
</head>

<body data-target="#navbar-spy" data-spy="scroll">
	<!--頁首區塊---------->
		<!--導覽列-->
		<nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top" id="navbar-spy">
			<!--網站LOGO--><a class="navbar-brand" href="index.html">How's Weather</a>
			<!--縮小時漢堡鈕-->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon" style="width:20px;height:30px;"></span>
			</button>
			<!--導覽列內容-->
			<div class="collapse navbar-collapse justify-content-between" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item"><a class="nav-link" href="#home">首頁</a></li>
					<li class="nav-item"><a class="nav-link" href="#section2">今明預報</a></li>
					<li class="nav-item"><a class="nav-link" href="#section3">一週天氣</a></li>
					<li class="nav-item"><a class="nav-link" href="#footer">關於</a></li>
				</ul>
			</div>
		</nav>

	<!--內容區塊---------->
	<content>
		<section id="home" class="container-fluid">
			<div class="row h-100">
				<div class="col align-self-center">
					<select id="selectCity" class="selectpicker show-menu-arrow" data-width="fit"></select><br/>
					<span id="currentWx" class="weatherInfo">陰時多雲短暫陣雨</span><br/>
					<span id="currentTemp">17.40°C</span><br/>
					<span id="currentPoP" class="weatherInfo">降雨機率　50%</span><br/>
					<span id="currentHUMD" class="weatherInfo">濕　　度　75%</span><br/>
					<span id="current24R" class="weatherInfo">今日雨量　0mm</span><br/>
				</div>
			</div>
		</section>

		<section id="section2" class="container-fluid">
			<div class="row h-100">
				<div class="col-12 col-md-8 offset-md-2 col-lg-6 offset-lg-3 align-self-center">
					<h1>今明預報</h1>
					<div id="todayAndTomorrow" class="tableRound table-responsive">
						<table class="text-nowrap">
							<tr id="twoDaysTimesTitle"><th id="twoDaysCity"></th><th>氣溫</th><th>天氣現象</th><th>舒適度</th><th>降雨機率</th></tr>
							<tr id="twoDaysTimes01"></tr><tr id="twoDaysTimes02"></tr><tr id="twoDaysTimes03"></tr><tr id="twoDaysTimes04"><tr id="twoDaysTimes05"></tr>
						</table>
					</div>
				</div>
			</div>
		</section>

		<section id="section3" class="container-fluid">
			<div class="row h-100">
				<div class="col-12 col-lg-8 offset-lg-2 align-self-center">
					<h1>一週天氣</h1>
					<div id="weekWeather" class="tableRound table-responsive">
						<table class="text-nowrap">
							<tr id="weekWeatherTitle"><th id="weekCity"></th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th><th>MM/DD</th></tr>
							<tr id="weekWeatherDay"></tr><tr id="weekWeatherNight"></tr>
						</table>
					</div>
				</div>
			</div>
		</section>
	</content>
	
	<!--頁尾-->
	<footer id="footer" class="container-fluid">
		<div class="row h-100">
			<div class="col-12 col-lg-8 offset-lg-2 align-self-center">
				<h1>About</h1>
				<div class="aboutMe">
					<img src="images/editor.jpg" style="width: 50px; border-radius: 50%;"/>
					<span>　B10723007　林子佑</span>
				</div>
				<span class="ftitle">How's Weather Copyright 2019 &copy; All Rights Reserved.</span>
			</div>
		</div>
	</footer>
	

	<!--避免本頁面過冗長，以下三個JS檔獨立出來---------->
	<script src="js/weather/weatherObj.js"></script> <!--天氣物件變數-->
	<script src="js/weather/weatherGetJSON.js"></script> <!--天氣資料取得函式-->
	<script src="js/weather/changeWeather.js"></script> <!--天氣資料更改函式-->
	
	<!--本頁面JavaScript、JQuery---------->
	<script>
		//html 載入時執行
		$(function(){	
			$.ajaxSettings.async = false;
			getTwoDaysData(); //取得36小時天氣資料
			getCurrentData(); //取得局屬測站天氣資料及自動測站天氣資料
			getWeekData(); //取得一週天氣資料
			//--------------------載入後改變初始選取資料--------------------
			editWeatherData($('#selectCity').val("臺北市").selectpicker('refresh').val());
		});

		//建立下拉選單
		Object.keys(weatherObj).map(function(cityName){
			$('#selectCity').append('<option value="'+ cityName  + '">' + cityName + '</option>');
		})

		//下拉選單改變時
		$('#selectCity').on('changed.bs.select', function() {
			editWeatherData(this.value);
		});

		//更改今明預報及目前天氣function
		var editWeatherData = function (cityName){ 
			changeCurrent(cityName); //改目前天氣
			changeTwoDays(cityName); //改今明預報
			changeWeek(cityName); //改一週預報
		};

		//超連結切換頁面時會用滑的，而不是直接跳過去
		$("a").on('click', function() {
			var hash = this.hash;// 存超連結hash值
			//使用jQuery的animate()加平滑滾動，數字800代表滾動到指定區域(hash)所需的毫秒數
			$('html, body').animate({ scrollTop: $(hash).offset().top }, 800);
		});
	</script>
</body>
</html>